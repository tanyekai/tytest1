# git分支操作

分支就是科幻电影里面的平行宇宙，当你正在电脑前努力学习Git的时候，另一个你正在另一个平行宇宙里努力学习SVN。

如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，结果，你既学会了Git又学会了SVN！

![](images/fenzhi.png)



## **为什么要有分支？** 

- 如果你要开发一个新的功能，需要2周时间，第一周你只能写50%代码，如果此时立即提交，代码没写完，不完整的代码会影响到别人无法工作。如果等代码写完再提交，代码很容易丢失，风险很大。
- 有了分支，你就可以创建一个属于自己的分支，别人看不到，也不影响别人，你在自己的分支上工作，提交到自己的分支上，等到功能开发完毕，一次性的合并到原来的分支。这样既安全，又不影响他人工作。
- 在工作过程中，经常会碰到**多任务并行开发** 的情况，使用分支就能很好的避免任务之间的影响。
- 其他版本工具比如svn，cvs中也有分支这个概念，但是这些工具中的分支操作非常的慢，形同摆设。

## 分支操作的命令

### 创建分支

- `git branch 分支名称`创建分支，分支中的代码，在创建时与主分支的内容完全相同。
- git在第一次提交时，就有了一个叫`master`的主分支。

### 查看分支

- `git branch`可以查看所有的分支，
- 在当前分支的前面会有一个

### 切换分支

- `git checkout 分支名称`切换分支
- 在当前分支的任何操作，都不会影响到其他的分支，除非进行了分支合并。
- 切换分支之前，**必须保证代码已经提交了** 

### 创建并切换分支

### 删除分支

- `git branch -d 分支名称` 可以删除分支
- 注意：不能在当前分支删除当前分支，需要切换到其他分支才能删除。
- 注意：`master`分支是可以删除的，但是不推荐那么做。

### 合并分支

- `git merge 分支名称` 将其他分支的内容合并到当前分支。
- 在`master`分支中执行`git merge dev` 将`dev`分支中的代码合并到`master`分支

## git分支的工作原理

![](images/git-branch.png)

## git合并冲突

- 对于同一个文件，如果有多个分支需要合并时，容易出现冲突。
- 合并分支时，如果出现冲突，只能手动处理，再次提交，一般的作法，把自己的代码放到冲突代码的后面即可。

# 远程仓库

所有的程序员都可以通过远程仓库来进行版本的共享，达到所有人的代码一致的效果。

## 创建远程仓库（了解）

+ 创建远程仓库

```javascript
git init --bare   # 创建一个裸仓库
```

+ 远程仓库是一个裸仓库，只支持push、clone、pull等操作
+ 裸仓库的目的是用来管理版本的共享。
+ 裸仓库不支持add commit等操作。不进行任何的开发工作。
+ 一般裸仓库的名称会以.git结尾



## 远程仓库相关的命令

### git push

- 作用：将本地代码提交到远程仓库
- `git push 仓库地址 master` 在代码提交到远程仓库，注意master分支必须写，不能省略
- 例子：`git push git@github.com:hucongcong/test.git master` 如果第一次使用，需要填写github的用户名和密码

### git pull

- 作用：将远程的代码下载到本地
- `git pull 代码地址 master` 将远程的代码中master分支下载到本地
- 通常在push前，需要先pull一次。

### git clone

- 作用：克隆远程仓库的代码到本地
- `git clone 仓库地址 自定义本地仓库名` 将整个仓库克隆到本地

### git remote

每次push和pull操作都需要带上远程仓库的地址，非常的麻烦，我们可以给仓库地址设置一个别名

- `git remote add 仓库别名 仓库地址` 使用仓库别名替代仓库地址。仓库别名相当于一个js变量，仓库地址就是对应的值。
  - `git remote add hucc git@github.com:hucongcong/test.git` 设置了一个hucc的仓库别名，以后push和pull都可以不用仓库地址，而用hucc
- `git remote remove hucc` 删除hucc这个仓库别名。
- `git remote` 查看所有的仓库别名
- 如果使用了`git clone`命令从远程仓库获取下来的，那么这个本地仓库会自动添加一个 origin的远程地址，指向的就是克隆的远程地址。

## github

git与github没有直接的关系。

- git是一个版本控制工具。
- github是一个代码托管平台，是git的一个远程代码仓库。
- 将来工作时，公司会有自己的代码仓库。

[github官网](https://github.com/)

[开源中国-git](https://git.oschina.net/)

```bash
1. gitHub是一个面向开源及私有软件项目的托管平台，因为只支持git 作为唯一的版本库格式进行托管，故名gitHub。
2. github免费，代码所有人都能看到，但是只有你自己能修改。付费的可以隐藏。
```



在github上创建一个项目，获取到仓库的地址。然后就可以将本地的代码推送到远程的服务器上。

## SSH免登陆

每次push代码，都需要输入用户名跟密码，非常的麻烦。因此我们可以配置一个SSH免登陆。

- github为了账户的安全，需要对每一次push请求都要验证用户的身份，只有合法的用户才可以push
- 使用ssh可以实现免密码操作（不需要使用密码）

### 对称加密与非对称加密（了解）

对称加密：采用单钥密码系统的加密方法，同一个密钥可以同时用作信息的加密和解密，这种加密方法称为对称加密，也称为单密钥加密。

优点：算法公开、计算量小、加密速度快、加密效率高

![](images/对称加密.jpg)



非对称加密：非对称加密算法需要两个密钥来进行加密和解密，这两个秘钥是公开密钥（public key，简称公钥）和私有密钥（private key，简称私钥）

公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。

优点：更安全，缺点：加密和解密花费时间长、速度慢，只适合对少量数据进行加密。

![](images/非对称加密.jpg)



### ssh免登录的原理



![](images/ssh免登陆.png)

### SSH免登录配置

- 1 创建SSH Key：`ssh-keygen -t rsa`
- 2 在文件路径 `C:\用户\当前用户名\` 找到 `.ssh` 文件夹
- 3 文件夹中有两个文件：
  - 私钥：`id_rsa`
  - 公钥：`id_rsa.pub`
- 4 在 `github -> settings -> SSH and GPG keys`页面中，新创建SSH key
- 5 粘贴 公钥 `id_rsa.pub` 内容到对应文本框中
- 5 在github中新建仓库或者使用现在仓库，拿到`git@github.com:用户名/仓库名.git`
- 6 此后，再次SSH方式与github“通信”，不用输入密码确认身份了

## 使用github pages搭建博客

[GitHub Pages ](https://pages.github.com/)本用于介绍托管在 GitHub 的项目， 不过，由于他的空间免费稳定，用来做搭建一个博客再好不过了。

缺点：只能放静态页面，也就说github pages只能解析html、css、js，无法解析后端语言。

博客搭建步骤：

1. 在本地工作目录使用git初始化 `git init`
2. 创建自己的博客项目
3. 将创建好的博客添加到暂存区 `git add [文件路径]`
4. 本地提交： `git commit -m "第一个博客"`
5. 在github上创建一个项目，项目名`用户名.github.io` 固定的
6. 提交到github：`git push github仓库地址 master`
7. 查看github中对应的仓库中，是不是提交到了
8. 访问：用户名.github.io

## hexo创建博客（了解）

### 安装步骤

- 安装hexo

```javascript
npm install -g hexo

hexo -v  # 查看hexo的版本信息
```

- 初始化博客

```javascript
# 新建一个目录  blog
hexo init  # 初始化
```

- 生成静态页面

```javascript
hexo generate   # 生成静态页面	
hexo g          # 生成静态页面（简写）
```

- 启动服务

```javascript
hexo server   # 启动服务
```

- 访问站点

```javascript
http://localhost:4000/  # 通过这个地址就可以访问了
```

### hexo常见命令

+ `hexo n '博客标题'`创建一篇新的博客
+ `hexo g` 生成博客
+ `hexo d` 发布博客

[hexo中文文档](https://hexo.io/zh-cn/docs/)

